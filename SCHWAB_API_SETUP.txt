Schwab API Integration - Implementation Summary
===============================================

Files Created
-------------

| File                  | Purpose                                                    |
|-----------------------|------------------------------------------------------------|
| server/server.js      | Express server with OAuth2 authentication and API routes   |
| server/package.json   | Node.js dependencies (express, axios, dotenv, cors, selfsigned) |
| server/.env.example   | Template for Schwab API credentials                        |
| .gitignore            | Excludes sensitive files (tokens.json, .env, node_modules) |

Files Modified
--------------

| File                       | Changes                                              |
|----------------------------|------------------------------------------------------|
| Simple_FrontEnd_React.html | Added auth UI, API integration, live/demo badges     |


Key Features Implemented
------------------------

Backend (server/server.js):
- OAuth2 flow: /auth/login, /callback, /auth/status, /auth/logout
- Market Data routes: /api/quote/:symbol, /api/options/:symbol
- Auto token refresh before expiration
- Self-signed HTTPS certificate generation
- CORS configuration for localhost

Frontend:
- Authentication status bar with login/logout buttons
- Polls for auth completion after login popup
- Fetches real quotes and options chains when authenticated
- Falls back to calculated demo data when not authenticated
- Displays "LIVE" or "DEMO" badges on data
- Shows Delta and IV columns for real options data
- Graceful error handling with user messages


Setup Instructions
------------------

1. Create Schwab Developer Account (if not done):
   - Go to https://developer.schwab.com
   - Create an app with "Market Data Production" API
   - Set callback URL to: https://127.0.0.1:5000/callback
   - Wait for app approval (1-3 days)
   - Note your App Key (Client ID) and Secret

2. Configure Environment:
   - Copy server/.env.example to server/.env
   - Add your Schwab credentials:
     SCHWAB_CLIENT_ID=your_app_key_here
     SCHWAB_CLIENT_SECRET=your_secret_here
     SCHWAB_REDIRECT_URI=https://127.0.0.1:5000/callback

3. Start the Server:
   cd server
   npm install
   npm start

4. Use the App:
   - Open Simple_FrontEnd_React.html in your browser
   - Click "Login to Schwab" button in the top-right
   - Complete OAuth authentication in the popup
   - Search for a stock symbol (e.g., AAPL) to see real-time data


API Endpoints
-------------

| Route               | Method | Purpose                    |
|---------------------|--------|----------------------------|
| /auth/login         | GET    | Redirect to Schwab login   |
| /callback           | GET    | Handle OAuth callback      |
| /auth/status        | GET    | Check authentication status|
| /auth/logout        | POST   | Clear stored tokens        |
| /api/quote/:symbol  | GET    | Get stock quote            |
| /api/options/:symbol| GET    | Get options chain          |


Token Management
----------------

- Access tokens expire in 30 minutes (auto-refreshed)
- Refresh tokens expire in 7 days (user must re-login)
- Tokens stored in server/tokens.json (gitignored)


Rate Limits
-----------

- Schwab API: ~120 requests/minute
- App makes 2 requests per search (quote + options chain)


Troubleshooting
---------------

1. "Server offline" message:
   - Make sure the server is running (npm start)
   - Check that you're accessing via HTTPS

2. Browser certificate warning:
   - The server uses a self-signed certificate
   - Click "Advanced" > "Proceed" to accept it

3. OAuth errors:
   - Verify your callback URL matches exactly
   - Check that your app is approved on Schwab Developer Portal

4. API errors after login:
   - Tokens may have expired - try logging out and back in
   - Check server console for detailed error messages
